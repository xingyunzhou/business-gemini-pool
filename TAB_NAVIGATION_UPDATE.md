# 标签页导航功能更新

## 问题

用户反馈"模型管理和在线聊天都没了"，因为首页只显示账号管理，缺少其他功能的入口。

## 解决方案

创建了带标签页的管理控制台，整合所有功能。

## 新增文件

### 1. islands/ModelManager.tsx
模型管理组件，提供模型的 CRUD 操作：
- ✅ 列出所有模型
- ✅ 添加新模型
- ✅ 编辑模型
- ✅ 删除模型
- ✅ 启用/禁用模型

### 2. islands/TabManager.tsx
标签页管理器，提供导航切换：
- ✅ 账号管理标签
- ✅ 模型管理标签
- ✅ 在线聊天链接（跳转到 /chat）

### 3. routes/index.tsx (更新)
使用 TabManager 替代原来的 AccountManager

## 功能展示

### 管理控制台首页 (/)

```
┌────────────────────────────────────────────────────────┐
│  Business Gemini Pool - 管理控制台             [登出]   │
└────────────────────────────────────────────────────────┘

  [账号管理] [模型管理] [在线聊天]
  ─────────

  ┌──────────────────────────────────────────────────────┐
  │                                                       │
  │  当前标签页内容（AccountManager 或 ModelManager）      │
  │                                                       │
  └──────────────────────────────────────────────────────┘
```

### 标签页说明

| 标签 | 功能 | 类型 |
|------|------|------|
| 账号管理 | 管理 Gemini Enterprise 账号 | 切换标签页 |
| 模型管理 | 管理可用的 AI 模型 | 切换标签页 |
| 在线聊天 | 跳转到聊天界面 | 页面跳转 |

## 模型管理功能

### 模型列表
显示所有已配置的模型：
- 模型 ID（如 `gemini-enterprise`）
- 模型名称（如 `Gemini Enterprise`）
- 状态（启用/禁用）
- 操作按钮（启用/禁用、编辑、删除）

### 添加模型
点击"添加模型"按钮，填写：
- **模型 ID**（必填）：如 `gemini-enterprise`
- **模型名称**（必填）：如 `Gemini Enterprise`

### 编辑模型
点击"编辑"按钮：
- 模型 ID 不可修改
- 可修改模型名称

### 启用/禁用
快速切换模型的启用状态，禁用的模型不会出现在 API 响应中。

## API 支持

ModelManager 调用以下 API：

| 操作 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 列表 | GET | `/api/models` | 获取所有模型 |
| 创建 | POST | `/api/models` | 添加新模型 |
| 更新 | PUT | `/api/models/:id` | 更新模型信息 |
| 删除 | DELETE | `/api/models/:id` | 删除模型 |

所有请求都自动携带 Cookie 认证（`credentials: "include"`）。

## 导航逻辑

### 标签页切换
使用 Preact Signals 管理当前活动标签：
```typescript
const activeTab = signal<Tab>("accounts");  // 默认显示账号管理

// 切换标签
activeTab.value = "models";  // 切换到模型管理
```

### 页面跳转
"在线聊天"是一个链接，点击后跳转到 `/chat` 页面。

## 样式设计

### 活动标签
- 蓝色底部边框
- 蓝色文字
- `border-blue-500 text-blue-600`

### 非活动标签
- 透明底部边框
- 灰色文字
- 悬停时显示灰色边框
- `border-transparent text-gray-500 hover:border-gray-300`

## 默认行为

- 打开管理控制台时，默认显示"账号管理"标签
- 可以通过点击标签切换到"模型管理"
- 点击"在线聊天"会跳转到聊天页面

## 用户体验改进

### 之前
- ❌ 只能看到账号管理
- ❌ 无法访问模型管理
- ❌ 聊天功能不明显

### 现在
- ✅ 清晰的标签页导航
- ✅ 所有功能一目了然
- ✅ 快速切换不同管理功能
- ✅ 在线聊天入口明显

## 文件更新列表

### 新增
- ✅ `islands/ModelManager.tsx` - 模型管理组件
- ✅ `islands/TabManager.tsx` - 标签页管理器

### 修改
- ✅ `routes/index.tsx` - 使用 TabManager
- ✅ `fresh.gen.ts` - 注册新的 islands

## 测试步骤

1. **重新部署应用**
2. **访问首页**：`https://your-app.deno.dev`
3. **查看标签页**：应该看到"账号管理"、"模型管理"、"在线聊天"三个标签
4. **切换标签**：
   - 点击"模型管理" → 显示模型列表
   - 点击"账号管理" → 显示账号列表
   - 点击"在线聊天" → 跳转到聊天页面

5. **测试模型管理**：
   - 添加模型：`gemini-enterprise` / `Gemini Enterprise`
   - 编辑模型名称
   - 禁用/启用模型
   - 删除模型

## 未来优化建议

- [ ] 添加"系统配置"标签
- [ ] 添加"使用统计"标签
- [ ] 支持 URL 参数保存当前标签（如 `/?tab=models`）
- [ ] 添加标签页的键盘快捷键
- [ ] 显示每个标签页的未读通知数量

## 总结

通过添加标签页导航，用户现在可以：
1. ✅ 在一个页面访问所有管理功能
2. ✅ 快速切换不同功能模块
3. ✅ 清晰了解系统提供的所有功能
4. ✅ 更好的用户体验和导航逻辑

所有功能都已恢复，并且更加易用！
